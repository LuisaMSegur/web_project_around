!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=document.querySelector("#card-template").content,o=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=e,this.link=n,this.handleClickImage=r},(n=[{key:"getTemplate",value:function(){return r.querySelector(".card").cloneNode(!0)}},{key:"toggleLike",value:function(){this.buttonLikeCard.classList.toggle("card__button-love_active")}},{key:"removeCard",value:function(){this.htmlCard.remove()}},{key:"closeOnEsc",value:function(t){"Escape"===t.key&&this.closePopUpImage()}},{key:"closeClickOutForm",value:function(t,e){e.target===t&&this.closePopUpImage()}},{key:"openPopUpImage",value:function(){var t=this,e=document.querySelector("#popup-image"),n=e.querySelector(".popup__photo"),r=e.querySelector(".popup__photo-title");e.classList.add("popup_open"),r.textContent=this.title,n.src=this.link,document.addEventListener("keydown",this.closeOnEsc.bind(this)),document.addEventListener("click",(function(n){return t.closeClickOutForm(e,n)}))}},{key:"closePopUpImage",value:function(){document.querySelector("#popup-image").classList.remove("popup_open"),document.removeEventListener("keydown",this.closeOnEsc.bind(this))}},{key:"setEventListeners",value:function(){var t=this;this.buttonLikeCard.addEventListener("click",(function(){t.toggleLike()})),this.buttonDeleteCard.addEventListener("click",(function(){t.removeCard()})),this.cardImage.addEventListener("click",(function(){t.handleClickImage()}))}},{key:"setProperties",value:function(){this.htmlCard=this.getTemplate(),this.cardImage=this.htmlCard.querySelector(".card__photo"),this.cardTitle=this.htmlCard.querySelector(".card__name-place"),this.buttonLikeCard=this.htmlCard.querySelector(".card__button-love"),this.buttonDeleteCard=this.htmlCard.querySelector(".card__button-trash"),this.cardTitle.textContent=this.title,this.cardImage.src=this.link}},{key:"setCard",value:function(){return this.setProperties(),this.setEventListeners(),this.htmlCard}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var c=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.formElement=e,this.settings=n,this.inputList=Array.from(this.formElement.querySelectorAll(this.settings.inputSelector)),this.buttonElement=this.formElement.querySelector(this.settings.submitButtonSelector)},(e=[{key:"showInputError",value:function(t,e){var n=this.formElement.querySelector("#".concat(t.id,"-error"));t.classList.add(this.settings.inputErrorClass),n.textContent=e,n.classList.add(this.settings.errorClass)}},{key:"hideInputError",value:function(t){var e=this.formElement.querySelector("#".concat(t.id,"-error"));t.classList.remove(this.settings.inputErrorClass),e.textContent="",e.classList.remove(this.settings.errorClass)}},{key:"checkInputValidity",value:function(t){t.validity.valid?this.hideInputError(t):this.showInputError(t,t.validationMessage)}},{key:"hasInvalidInput",value:function(){return this.inputList.some((function(t){return!t.validity.valid}))}},{key:"toggleButtonState",value:function(){this.hasInvalidInput()?(this.buttonElement.disabled=!0,this.buttonElement.classList.add(this.settings.inactiveButtonClass)):(this.buttonElement.disabled=!1,this.buttonElement.classList.remove(this.settings.inactiveButtonClass))}},{key:"setEventListeners",value:function(){var t=this;this.toggleButtonState(),this.inputList.forEach((function(e){e.addEventListener("input",(function(){t.checkInputValidity(e),t.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this.formElement.addEventListener("submit",(function(t){t.preventDefault()})),this.setEventListeners()}}])&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),l={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function f(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}var m=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.popupElement=document.querySelector(e),this.closeButton=this.popupElement.querySelector(".popup__close"),this._handleEsClose=this._handleEsClose.bind(this)},(e=[{key:"openPopup",value:function(){this.popupElement.classList.add("popup_open"),document.addEventListener("keydown",this._handleEsClose)}},{key:"closePopup",value:function(){this.popupElement.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEsClose)}},{key:"_handleEsClose",value:function(t){"Escape"===t.key&&this.closePopup()}},{key:"handleClickOutside",value:function(t){return t.target.classList.contains("popup_open")}},{key:"setEventListeners",value:function(){var t=this;this.closeButton.addEventListener("click",(function(){t.closePopup()})),this.popupElement.addEventListener("click",(function(e){t.handleClickOutside(e)&&t.closePopup()}))}}])&&p(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function b(t){var e=function(t){if("object"!=y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(d=function(){return!!t})()}function h(t,e,n,r){var o=E(S(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},E.apply(null,arguments)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}var w=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,n){return e=S(e),function(t,e){if(e&&("object"==y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,d()?Reflect.construct(e,n||[],S(t).constructor):e.apply(t,n))}(this,e,[t])).formElement=r.popupElement.querySelector(".form"),r.inputList=r.formElement.querySelectorAll(".form__input"),r.handleFormSubmit=n,r.buttonSubmit=r.popupElement.querySelector(".form__submit"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(e,t),n=e,(r=[{key:"_getInputValues",value:function(){var t=this;return this.formValues={},this.inputList.forEach((function(e){t.formValues[e.name]=e.value})),this.formValues}},{key:"setEventListeners",value:function(){var t=this;h(e,"setEventListeners",this,3)([]),this.popupElement.querySelector(".form").addEventListener("submit",(function(e){e.preventDefault(),t.handleFormSubmit(t._getInputValues()),t.closePopup()}))}},{key:"closePopup",value:function(){h(e,"closePopup",this,3)([]),this.formElement.reset()}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(m);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P(r.key),r)}}function P(t){var e=function(t){if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(null,arguments)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}var q=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=O(e),function(t,e){if(e&&("object"==_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,n||[],O(t).constructor):e.apply(t,n))}(this,e,[t])).imageElement=n.popupElement.querySelector(".popup__photo"),n.titleElement=n.popupElement.querySelector(".popup__photo-title"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(e,t),n=e,r=[{key:"openPopup",value:function(t,n){var r,o,i;(r=e,o=this,"function"==typeof(i=j(O(1&3?r.prototype:r),"openPopup",o))?function(t){return i.apply(o,t)}:i)([]),this.titleElement.textContent=t,this.imageElement.src=n}}],r&&k(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(m);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function B(t){var e=function(t){if("object"!=I(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==I(e)?e:e+""}var R=function(){return t=function t(e){var n=e.name,r=e.about;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=n,this.about=r},e=[{key:"getUserInfo",value:function(){return{name:this.name.textContent,about:this.about.textContent}}},{key:"setUserInfo",value:function(t,e){this.name.textContent=t,this.about.textContent=e}}],e&&T(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U(r.key),r)}}function U(t){var e=function(t){if("object"!=V(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(e)?e:e+""}var D=function(){return t=function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=r,this.renderer=o,this.container=n},(e=[{key:"renderItems",value:function(){var t=this;this.items.forEach((function(e){t.renderer(e)}))}},{key:"addItem",value:function(t){this.container.append(t)}},{key:"addCard",value:function(t){this.container.prepend(t)}}])&&x(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),z=document.querySelector("#form-profile"),W=document.querySelector(".profile__title"),F=document.querySelector(".profile__subtitle"),A=document.querySelector("#name"),M=document.querySelector("#aboutme"),N=document.querySelector(".cards"),Y=document.querySelector("#form-card"),G=document.querySelector("#input-place"),H=document.querySelector("#input-image"),J=document.querySelector(".profile__button"),K=document.querySelector(".profile__button-add");new D({items:[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],renderer:function(t){var e=new o(t.name,t.link,(function(){$.openPopup(t.name,t.link)}));N.append(e.setCard())}},N).renderItems();var Q=new R({name:W,about:F});Q.getUserInfo(),Q.setUserInfo(A.value,M.value);var X=new w("#popup-profile",(function(t){var e=t.name,n=t.about;Q.setUserInfo(e,n)}));J.addEventListener("click",(function(){X.openPopup()}));var Z=new w("#popup-card",(function(){var t=new o(G.value,H.value,(function(){$.openPopup(G.value,H.value)}));N.prepend(t.setCard()),Z.closePopup()}));K.addEventListener("click",(function(){Z.openPopup()}));var $=new q("#popup-image");X.setEventListeners(),Z.setEventListeners(),$.setEventListeners();var tt=new c(z,l),et=new c(Y,l);tt.enableValidation(),et.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Yl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgbGluaywgaGFuZGxlQ2xpY2tJbWFnZSkge1xyXG4gICAgICAgICh0aGlzLnRpdGxlID0gdGl0bGUpLCAodGhpcy5saW5rID0gbGluayk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVDbGlja0ltYWdlID0gaGFuZGxlQ2xpY2tJbWFnZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlTGlrZSgpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbkxpa2VDYXJkLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tbG92ZV9hY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLmh0bWxDYXJkLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlT25Fc2MoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVBvcFVwSW1hZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VDbGlja091dEZvcm0ocG9wdXAsIGV2dCkge1xyXG4gICAgICAgIGlmIChldnQudGFyZ2V0ID09PSBwb3B1cCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlUG9wVXBJbWFnZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZW5Qb3BVcEltYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IHBvcFVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWltYWdlXCIpO1xyXG4gICAgICAgIGNvbnN0IHBvcFVwSW1hZ2VTcmMgPSBwb3BVcEltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3Bob3RvXCIpO1xyXG4gICAgICAgIGNvbnN0IFBvcFVwVGl0bGVJbWFnZSA9IHBvcFVwSW1hZ2UucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGhvdG8tdGl0bGVcIik7XHJcblxyXG4gICAgICAgIHBvcFVwSW1hZ2UuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5cIik7XHJcbiAgICAgICAgUG9wVXBUaXRsZUltYWdlLnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcclxuICAgICAgICBwb3BVcEltYWdlU3JjLnNyYyA9IHRoaXMubGluaztcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5jbG9zZU9uRXNjLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PlxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlQ2xpY2tPdXRGb3JtKHBvcFVwSW1hZ2UsIGV2dClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgY2xvc2VQb3BVcEltYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IHBvcFVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWltYWdlXCIpO1xyXG4gICAgICAgIHBvcFVwSW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5cIik7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuY2xvc2VPbkVzYy5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbkxpa2VDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTGlrZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uRGVsZXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNhcmQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNsaWNrSW1hZ2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRQcm9wZXJ0aWVzKCkge1xyXG4gICAgICAgIHRoaXMuaHRtbENhcmQgPSB0aGlzLmdldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5jYXJkSW1hZ2UgPSB0aGlzLmh0bWxDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fcGhvdG9cIik7XHJcbiAgICAgICAgdGhpcy5jYXJkVGl0bGUgPSB0aGlzLmh0bWxDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbmFtZS1wbGFjZVwiKTtcclxuICAgICAgICB0aGlzLmJ1dHRvbkxpa2VDYXJkID0gdGhpcy5odG1sQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1sb3ZlXCIpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uRGVsZXRlQ2FyZCA9IHRoaXMuaHRtbENhcmQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgXCIuY2FyZF9fYnV0dG9uLXRyYXNoXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcclxuICAgICAgICB0aGlzLmNhcmRJbWFnZS5zcmMgPSB0aGlzLmxpbms7XHJcbiAgICB9XHJcbiAgICBzZXRDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuc2V0UHJvcGVydGllcygpO1xyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odG1sQ2FyZDtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBzZXR0aW5ncykge1xyXG4gICAgICAgICh0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQpLCAodGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzKTtcclxuICAgICAgICB0aGlzLmlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgICAgdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uRWxlbWVudCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICBzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgIH1cclxuICAgIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcclxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3lvc2VtaXRlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiLFxyXG4gICAgfSxcclxuXTtcclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdFwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXRfZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLmNsb3NlQnV0dG9uID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNDbG9zZSA9IHRoaXMuX2hhbmRsZUVzQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuUG9wdXAoKSB7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5cIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNDbG9zZSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZVBvcHVwKCkge1xyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzQ2xvc2UpO1xyXG4gICAgfVxyXG4gICAgX2hhbmRsZUVzQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGFuZGxlQ2xpY2tPdXRzaWRlKGV2dCkge1xyXG4gICAgICAgIHJldHVybiBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5cIik7XHJcbiAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRsZUNsaWNrT3V0c2lkZShldnQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cHtcclxuY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCl7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuZm9ybUVsZW1lbnQgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLmlucHV0TGlzdCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7ICBcclxuICAgIHRoaXMuYnV0dG9uU3VibWl0ID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zdWJtaXRcIilcclxufVxyXG5cclxuIF9nZXRJbnB1dFZhbHVlcygpe1xyXG4gdGhpcy5mb3JtVmFsdWVzID0ge307XHJcbiB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCk9PntcclxuICAgICB0aGlzLmZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuIH0pO1xyXG4gcmV0dXJuIHRoaXMuZm9ybVZhbHVlczsgIFxyXG4gfVxyXG5cclxuXHJcbnNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpPT57XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgfSk7XHJcbiB9XHJcblxyXG4gY2xvc2VQb3B1cCgpe1xyXG4gICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcclxuICAgICB0aGlzLmZvcm1FbGVtZW50LnJlc2V0KCk7XHJcbn1cclxuXHJcbn1cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxyXG4gICAgICAgIHRoaXMuaW1hZ2VFbGVtZW50ID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGhvdG9cIik7XHJcbiAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19waG90by10aXRsZVwiKTtcclxuXHJcbiAgICB9XHJcbiAgICBvcGVuUG9wdXAodGl0bGUsIGxpbmspe1xyXG4gICAgICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gICAgICAgIHRoaXMudGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuc3JjID0gbGluaztcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5hYm91dCA9IGFib3V0O1xyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBhYm91dDogdGhpcy5hYm91dC50ZXh0Q29udGVudCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckluZm8oaW5wdXROYW1lLCBpbnB1dEFib3V0KSB7XHJcbiAgICAgICAgdGhpcy5uYW1lLnRleHRDb250ZW50ID0gaW5wdXROYW1lO1xyXG4gICAgICAgIHRoaXMuYWJvdXQudGV4dENvbnRlbnQgPSBpbnB1dEFib3V0O1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb257XHJcbiAgICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3Ipe1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcygpe1xyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oZWxlbWVudCl7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENhcmQoZWxlbWVudCl7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IFwiLi9zdHlsZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuL3NjcmlwdHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZXR0aW5ncyB9IGZyb20gXCIuL3NjcmlwdHMvdXRpbHMuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9zY3JpcHRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL3NjcmlwdHMvU2VjdGlvbi5qc1wiO1xyXG5cclxuY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm0tcHJvZmlsZVwiKTtcclxuY29uc3QgdGV4dFRpdGxlUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmNvbnN0IHRleHRTdWJ0aXRsZVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIpO1xyXG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XHJcbmNvbnN0IGlucHV0QWJvdXRNZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXRtZVwiKTtcclxuY29uc3QgY2FyZHNBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc1wiKTtcclxuY29uc3QgZm9ybUFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm0tY2FyZFwiKTtcclxuY29uc3QgaW5wdXROYW1lQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtcGxhY2VcIik7XHJcbmNvbnN0IGlucHV0SW1hZ2VDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC1pbWFnZVwiKTtcclxuY29uc3QgYnV0dG9uRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvblwiKTtcclxuY29uc3QgYnV0dG9uQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZFwiKTtcclxuXHJcbi8vaW5zdGFuY2lhIGRlIGluaWNpYWxpemFjacOzbiBkZSBsYXMgY2FydGFzXHJcblxyXG5jb25zdCBzZWN0aW9uQ2FyZHMgPSBuZXcgU2VjdGlvbihcclxuICAgIHtcclxuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyKGl0ZW0pIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGl0ZW0ubmFtZSwgaXRlbS5saW5rLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cEltYWdlLm9wZW5Qb3B1cChpdGVtLm5hbWUsIGl0ZW0ubGluayk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXJkc0FyZWEuYXBwZW5kKG5ld0NhcmQuc2V0Q2FyZCgpKTtcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNhcmRzQXJlYVxyXG4pO1xyXG5cclxuc2VjdGlvbkNhcmRzLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vL2luc3RhbmNpYSBkYXRvcyBkZWwgcGVyZmlsIChub21icmUgeSBwcm9mZXNpw7NuKVxyXG5cclxuY29uc3QgbmV3VXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gICAgbmFtZTogdGV4dFRpdGxlUHJvZmlsZSxcclxuICAgIGFib3V0OiB0ZXh0U3VidGl0bGVQcm9maWxlLFxyXG59KTtcclxuXHJcbm5ld1VzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbm5ld1VzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0TmFtZS52YWx1ZSwgaW5wdXRBYm91dE1lLnZhbHVlKTtcclxuXHJcbi8vaW5zdGFuY2lhIGRlbCBwb3B1cFdpdGhGb3JtIGRlbCBwZXJmaWwsIGV2ZW50b3MgZGVsIGZvcm11bGFyaW8gZGVsIHBlcmZpbFxyXG5cclxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtcHJvZmlsZVwiLCAoZGF0YSkgPT4ge1xyXG4gICAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gZGF0YTtcclxuICAgIG5ld1VzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWUsIGFib3V0KTtcclxufSk7XHJcblxyXG5idXR0b25FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdXBQcm9maWxlLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuXHJcbi8vaW5zdGFuY2lhIGRlIFBvcHVwV2l0aEZvcm0gcGFyYSBhZ3JlZ2FyIGNhcnRhc1xyXG5cclxuY29uc3QgcG9wdXBDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtY2FyZFwiLCAoKSA9PiB7XHJcbiAgICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoaW5wdXROYW1lQ2FyZC52YWx1ZSwgaW5wdXRJbWFnZUNhcmQudmFsdWUsICgpID0+IHtcclxuICAgICAgICBwb3B1cEltYWdlLm9wZW5Qb3B1cChpbnB1dE5hbWVDYXJkLnZhbHVlLCBpbnB1dEltYWdlQ2FyZC52YWx1ZSk7XHJcbiAgICB9KTtcclxuICAgIGNhcmRzQXJlYS5wcmVwZW5kKG5ld0NhcmQuc2V0Q2FyZCgpKTtcclxuICAgIHBvcHVwQ2FyZC5jbG9zZVBvcHVwKCk7XHJcbn0pO1xyXG5cclxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdXBDYXJkLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuXHJcbi8vaW5zdGFuY2lhIHBhcmEgZWwgcG9wdXAgZGUgbGEgaW1hZ2VuIGRlIGxhcyBjYXJ0YXNcclxuXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcG9wdXAtaW1hZ2VcIik7XHJcblxyXG5wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vaW5zdGFuY2lhcyBkZWwgdmFsaWRhZG9yIGRlIGZvcm11bGFyaW9zXHJcblxyXG5jb25zdCB2YWxpZGF0aW9ucHJvZmlsZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Qcm9maWxlLCBzZXR0aW5ncyk7XHJcbmNvbnN0IHZhbGlkYXRpb25BZGRDYXJkcyA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1BZGRDYXJkLCBzZXR0aW5ncyk7XHJcbnZhbGlkYXRpb25wcm9maWxlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxudmFsaWRhdGlvbkFkZENhcmRzLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIl0sIm5hbWVzIjpbImNhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJDYXJkIiwidGl0bGUiLCJsaW5rIiwiaGFuZGxlQ2xpY2tJbWFnZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJrZXkiLCJ2YWx1ZSIsImNsb25lTm9kZSIsImJ1dHRvbkxpa2VDYXJkIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiaHRtbENhcmQiLCJyZW1vdmUiLCJldnQiLCJjbG9zZVBvcFVwSW1hZ2UiLCJwb3B1cCIsInRhcmdldCIsIl90aGlzIiwicG9wVXBJbWFnZSIsInBvcFVwSW1hZ2VTcmMiLCJQb3BVcFRpdGxlSW1hZ2UiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZU9uRXNjIiwiYmluZCIsImNsb3NlQ2xpY2tPdXRGb3JtIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl90aGlzMiIsInRvZ2dsZUxpa2UiLCJidXR0b25EZWxldGVDYXJkIiwicmVtb3ZlQ2FyZCIsImNhcmRJbWFnZSIsImdldFRlbXBsYXRlIiwiY2FyZFRpdGxlIiwic2V0UHJvcGVydGllcyIsInNldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50Iiwic2V0dGluZ3MiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImJ1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJoaWRlSW5wdXRFcnJvciIsInNob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwicHJldmVudERlZmF1bHQiLCJmb3JtU2VsZWN0b3IiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJwb3B1cEVsZW1lbnQiLCJjbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc0Nsb3NlIiwiY2xvc2VQb3B1cCIsImNvbnRhaW5zIiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJfY2FsbFN1cGVyIiwiYnV0dG9uU3VibWl0IiwiX2luaGVyaXRzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwibmFtZSIsIl90aGlzMyIsIl9zdXBlclByb3BHZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2VFbGVtZW50IiwidGl0bGVFbGVtZW50IiwiVXNlckluZm8iLCJfcmVmIiwiYWJvdXQiLCJpbnB1dE5hbWUiLCJpbnB1dEFib3V0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsImNvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsImZvcm1Qcm9maWxlIiwidGV4dFRpdGxlUHJvZmlsZSIsInRleHRTdWJ0aXRsZVByb2ZpbGUiLCJpbnB1dEFib3V0TWUiLCJjYXJkc0FyZWEiLCJmb3JtQWRkQ2FyZCIsImlucHV0TmFtZUNhcmQiLCJpbnB1dEltYWdlQ2FyZCIsImJ1dHRvbkVkaXRQcm9maWxlIiwiYnV0dG9uQWRkQ2FyZCIsIm5ld0NhcmQiLCJwb3B1cEltYWdlIiwib3BlblBvcHVwIiwic2V0Q2FyZCIsInJlbmRlckl0ZW1zIiwibmV3VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwicG9wdXBQcm9maWxlIiwiZGF0YSIsInBvcHVwQ2FyZCIsInZhbGlkYXRpb25wcm9maWxlIiwidmFsaWRhdGlvbkFkZENhcmRzIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=